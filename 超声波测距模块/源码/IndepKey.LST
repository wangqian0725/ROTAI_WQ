C51 COMPILER V7.10   INDEPKEY                                                              04/15/2016 21:28:15 PAGE 1   


C51 COMPILER V7.10, COMPILATION OF MODULE INDEPKEY
OBJECT MODULE PLACED IN IndepKey.OBJ
COMPILER INVOKED BY: d:\program files\Keil\C51\BIN\C51.EXE IndepKey.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          #include "IndepKey.h"
   2          #include "coon_def.h"
   3          #include "coon.h"
   4          #include "keys.h"
   5          #include <reg52.h>
   6          
   7          sbit indep_key_1=P3^6;
   8          sbit indep_key_2=P3^7;
   9          
  10          /*********************************************************************
  11           原型: uchar getkey_IndepKey()
  12           功能: 检测当前是否有独立按键按下
  13           返回: 按下的独立按键编号(1..n),没有按键则返回0
  14          *********************************************************************/
  15          uchar getkey_IndepKey()
  16          {
  17   1              //按键1
  18   1              if( indep_key_1 == 0 )       //检测到按键按下(可能)
  19   1              {
  20   2                      delay_ms(10);          //延迟10ms,此延时用于去抖
  21   2                      if( indep_key_1 == 0 )        //检测到低电平,确定有按键按下
  22   2                      {
  23   3                              while( indep_key_1 == 0 ) ;  //等待按键释放
  24   3                              return STD_KEY_IDX_1;
  25   3                      }
  26   2              }
  27   1      
  28   1              //按键2
  29   1              if( indep_key_2 == 0 )       //检测到按键按下(可能)
  30   1              {
  31   2                      delay_ms(10);          //延迟10ms,此延时用于去抖
  32   2                      if( indep_key_2 == 0 )        //检测到低电平,确定有按键按下
  33   2                      {
  34   3                              while( indep_key_2 == 0 ) ;  //等待按键释放
  35   3                              return STD_KEY_IDX_2;
  36   3                      }
  37   2              }
  38   1      
  39   1              return 0;
  40   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     41    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
